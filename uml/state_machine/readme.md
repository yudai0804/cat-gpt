ステートに関してはメインステートとサブステートの2種類を用意する。  
メインステートはイベント駆動のものを、サブステートはイベント駆動というよりかは実装寄り(粒度細かめ)なものにする。  
サブステートの粒度を実装寄り(細かく)するのは、組み込みシステムの場合は粒度が実装寄り(細かい)ほうが分かりやすく、デバッグもしやすいため。  